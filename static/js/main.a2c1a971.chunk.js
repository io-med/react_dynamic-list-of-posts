(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(4),s=c.n(n),o=c(2),a=c(1),i=(c(9),c(10),"https://mate.academy/students-api"),r=function(e){return fetch("".concat(i).concat(e)).then((function(e){return e.ok?e.json():Promise.reject()}))},l=(c(11),c(0)),u=function(e){var t=e.selectedUserId,c=e.selectedPostId,n=e.setSelectedPostId,s=e.areDetailsShown,i=e.postDetailsAreShown,u=Object(a.useState)([]),j=Object(o.a)(u,2),d=j[0],b=j[1],m=function(){r("/posts").then((function(e){b(e)}))},h=function(){var e;t&&(e=t,r("/posts?userId=".concat(e))).then((function(e){b(e)}))};return Object(a.useEffect)((function(){m()}),[]),Object(a.useEffect)((function(){h()})),Object(l.jsxs)("div",{className:"PostsList",children:[Object(l.jsx)("h2",{children:"Posts:"}),Object(l.jsx)("ul",{className:"PostsList__list",children:d.map((function(e){return Object(l.jsxs)("li",{className:"PostsList__item",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("b",{children:"[User ".concat(e.userId,"}]:")}),e.body]}),Object(l.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){s((function(t){return c!==e.id||!t})),n(e.id)},children:c===e.id&&i?"close":"open"})]},e.id)}))})]})},j=(c(13),function(e){var t=e.postId,c=Object(a.useState)(""),n=Object(o.a)(c,2),s=n[0],r=n[1],u=Object(a.useState)(""),j=Object(o.a)(u,2),d=j[0],b=j[1],m=Object(a.useState)(""),h=Object(o.a)(m,2),O=h[0],f=h[1],p={postId:t,name:s,email:d,body:O};return Object(l.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),function(e){fetch("".concat(i,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})}(p),r(""),b(""),f("")},children:[Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:s,onChange:function(e){return r(e.target.value)}})}),Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:d,onChange:function(e){return b(e.target.value)}})}),Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:O,onChange:function(e){return f(e.target.value)}})}),Object(l.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),d=(c(14),function(e){var t=e.postId,c=Object(a.useState)(""),n=Object(o.a)(c,2),s=n[0],u=n[1],d=Object(a.useState)(!0),b=Object(o.a)(d,2),m=b[0],h=b[1],O=Object(a.useState)([]),f=Object(o.a)(O,2),p=f[0],x=f[1],_=function(){(function(e){return r("/posts/".concat(e))})(t).then((function(e){u(e.body)}))},N=function(){(function(e){return r("/comments?postId=".concat(e))})(t).then((function(e){x(e)}))};return Object(a.useEffect)((function(){_()}),[t]),Object(a.useEffect)((function(){N()}),[p]),Object(l.jsxs)("div",{className:"PostDetails",children:[Object(l.jsx)("h2",{children:"Post details:"}),Object(l.jsx)("section",{className:"PostDetails__post",children:Object(l.jsx)("p",{children:s})}),Object(l.jsxs)("section",{className:"PostDetails__comments",children:[!!p.length&&Object(l.jsx)("button",{type:"button",className:"button",onClick:function(){h((function(e){return!e}))},children:"".concat(m?"Hide":"Show"," ").concat(p.length," comment").concat(1===p.length?"":"s")}),m&&p.map((function(e){return Object(l.jsx)("ul",{className:"PostDetails__list",children:Object(l.jsxs)("li",{className:"PostDetails__list-item",children:[Object(l.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return t="".concat(e.id),fetch("".concat(i,"/comments/").concat(t),{method:"DELETE"});var t},children:"X"}),Object(l.jsx)("p",{children:e.body})]})},e.id)}))]}),Object(l.jsx)("section",{children:Object(l.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(l.jsx)(j,{postId:t})})})]})}),b=function(e){var t=e.selectedUserId,c=e.setSelectedUserId,n=e.setDetailsAreShown,s=Object(a.useState)([]),i=Object(o.a)(s,2),u=i[0],j=i[1],d=function(){r("/users").then((function(e){j(e)}))};return Object(a.useEffect)((function(){d()}),[]),Object(l.jsxs)("label",{htmlFor:"unique-id",children:[Object(l.jsx)("span",{id:"unique-id",children:"Select a user: \xa0"}),Object(l.jsxs)("select",{className:"App__user-selector",value:t,onChange:function(e){c(+e.target.value),n(!1)},children:[Object(l.jsx)("option",{value:"",children:"Select user"}),u.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})},m=function(){var e=Object(a.useState)(0),t=Object(o.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(0),i=Object(o.a)(s,2),r=i[0],j=i[1],m=Object(a.useState)(!1),h=Object(o.a)(m,2),O=h[0],f=h[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{className:"App__header",children:Object(l.jsx)(b,{selectedUserId:c,setSelectedUserId:n,setDetailsAreShown:f})}),Object(l.jsxs)("main",{className:"App__main",children:[Object(l.jsx)("div",{className:"App__sidebar",children:Object(l.jsx)(u,{selectedUserId:c,selectedPostId:r,setSelectedPostId:j,areDetailsShown:f,postDetailsAreShown:O})}),Object(l.jsx)("div",{className:"App__content",children:O&&Object(l.jsx)(d,{postId:r})})]})]})};s.a.render(Object(l.jsx)(m,{}),document.getElementById("root"))}],[[15,1,2]]]);
//# sourceMappingURL=main.a2c1a971.chunk.js.map