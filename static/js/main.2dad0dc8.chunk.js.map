{"version":3,"sources":["api/api.ts","api/posts.ts","components/PostsList/PostsList.tsx","api/users.ts","components/NewCommentForm/NewCommentForm.tsx","api/comments.ts","components/PostDetails/PostDetails.tsx","components/UserSelect/UserSelect.tsx","App.tsx","index.tsx"],"names":["BASE_URL","getData","endPoint","fetch","then","response","ok","json","Promise","reject","PostsList","selectedUserId","selectedPostId","setSelectedPostId","areDetailsShown","postDetailsAreShown","useState","posts","setPosts","loadPosts","userId","postsFromServer","useEffect","className","map","post","body","type","onClick","current","id","NewCommentForm","postId","addComment","name","setName","email","setEmail","setBody","comment","addCommentHandler","event","preventDefault","method","headers","JSON","stringify","createComment","onSubmit","placeholder","required","value","onChange","target","PostDetails","details","setDetails","areCommentsShown","setAreCommentsShown","comments","setComments","loadDetails","getPostDetails","detailsFromServer","loadComments","getPostComments","commentsFromServer","commentDeleteHandler","commentId","removeComment","filter","length","UserSelect","setSelectedUserId","setDetailsAreShown","users","setUsers","loadUsers","usersFromServer","htmlFor","user","App","setUserId","setPostId","setPostDetailsAreShown","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2dad0dc8.chunk.js","sourcesContent":["export const BASE_URL = 'https://mate.academy/students-api';\n","import { BASE_URL } from './api';\n\nexport const getData = (endPoint: string) => {\n  return fetch(`${BASE_URL}${endPoint}`)\n    .then(response => {\n      if (!response.ok) {\n        return Promise.reject();\n      }\n\n      return response.json();\n    });\n};\n\nexport const getPosts = () => getData('/posts');\n\nexport const getPostDetails = (postId: number) => getData(`/posts/${postId}`);\n","import React, { useEffect, useState } from 'react';\nimport { getPosts } from '../../api/posts';\nimport { getUserPosts } from '../../api/users';\nimport { Post } from '../../types/Post';\nimport './PostsList.scss';\n\ntype Current = (current: boolean) => boolean;\n\ntype Props = {\n  selectedUserId: number;\n  selectedPostId: number;\n  setSelectedPostId: (postId: number) => void;\n  areDetailsShown: (fn: Current) => void;\n  postDetailsAreShown: boolean;\n};\n\nexport const PostsList: React.FC<Props> = ({\n  selectedUserId,\n  selectedPostId,\n  setSelectedPostId,\n  areDetailsShown,\n  postDetailsAreShown,\n}) => {\n  const [posts, setPosts] = useState<Post[]>([]);\n\n  const loadPosts = () => {\n    if (selectedUserId) {\n      getUserPosts(selectedUserId)\n        .then((postsFromServer: Post[]) => {\n          setPosts(postsFromServer);\n        });\n    } else {\n      getPosts()\n        .then((postsFromServer: Post[]) => {\n          setPosts(postsFromServer);\n        });\n    }\n  };\n\n  useEffect(() => {\n    loadPosts();\n  }, [selectedUserId]);\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n      <ul className=\"PostsList__list\">\n\n        {posts.map((post: Post) => (\n          <li\n            key={post.id}\n            className=\"PostsList__item\"\n          >\n            <div>\n              <b>\n                {`[User ${post.userId}}]:`}\n              </b>\n              {post.body}\n            </div>\n            <button\n              type=\"button\"\n              className=\"PostsList__button button\"\n              onClick={() => {\n                areDetailsShown(current => {\n                  if (selectedPostId !== post.id) {\n                    return true;\n                  }\n\n                  return !current;\n                });\n                setSelectedPostId(post.id);\n              }}\n            >\n              {(selectedPostId === post.id && postDetailsAreShown)\n                ? 'close'\n                : 'open'}\n            </button>\n          </li>\n        ))}\n\n      </ul>\n    </div>\n  );\n};\n","import { getData } from './posts';\n\nexport const getUsers = () => getData('/users');\n\nexport const getUserPosts = (userId: number) => getData(`/posts?userId=${userId}`);\n","import React, { useState } from 'react';\nimport { createComment } from '../../api/comments';\nimport './NewCommentForm.scss';\nimport { Comment } from '../../types/Comment';\n\ntype Props = {\n  postId: number;\n  addComment: (comment: Comment) => void;\n};\n\nexport const NewCommentForm: React.FC<Props> = ({ postId, addComment }) => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [body, setBody] = useState('');\n\n  const comment = {\n    postId,\n    name,\n    email,\n    body,\n  };\n\n  const clear = () => {\n    setName('');\n    setEmail('');\n    setBody('');\n  };\n\n  const addCommentHandler = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    createComment(comment)\n      .then(response => addComment(response));\n    clear();\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={(event) => {\n        addCommentHandler(event);\n      }}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          required\n          value={name}\n          onChange={event => setName(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          required\n          value={email}\n          onChange={event => setEmail(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          required\n          value={body}\n          onChange={event => setBody(event.target.value)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import { CommentToPost } from '../types/CommentToPost';\nimport { getData } from './posts';\nimport { BASE_URL } from './api';\n\nexport const getPostComments = (postId: number) => getData(`/comments?postId=${postId}`);\n\nexport const removeComment = (commentId: string) => {\n  return fetch(`${BASE_URL}/comments/${commentId}`, { method: 'DELETE' });\n};\n\nexport const createComment = (comment: CommentToPost) => {\n  return fetch(`${BASE_URL}/comments`, {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n    body: JSON.stringify(comment),\n  })\n    .then(response => response.json());\n};\n","import React, { useEffect, useState } from 'react';\nimport { getPostDetails } from '../../api/posts';\nimport { getPostComments, removeComment } from '../../api/comments';\nimport { NewCommentForm } from '../NewCommentForm';\nimport { Comment } from '../../types/Comment';\nimport './PostDetails.scss';\n\ntype Props = {\n  postId: number;\n};\n\nexport const PostDetails: React.FC<Props> = ({ postId }) => {\n  const [details, setDetails] = useState('');\n  const [areCommentsShown, setAreCommentsShown] = useState(true);\n  const [comments, setComments] = useState<Comment[]>([]);\n\n  const loadDetails = () => {\n    getPostDetails(postId)\n      .then(detailsFromServer => {\n        setDetails(detailsFromServer.body);\n      });\n  };\n\n  const loadComments = () => {\n    getPostComments(postId)\n      .then(commentsFromServer => {\n        setComments(commentsFromServer);\n      });\n  };\n\n  const commentDeleteHandler = (commentId: number) => {\n    removeComment(`${commentId}`)\n      .then(response => {\n        if (response) {\n          setComments(comments.filter(comment => comment.id !== commentId));\n        }\n      });\n  };\n\n  const addComment = (comment: Comment) => {\n    setComments([...comments, comment]);\n  };\n\n  useEffect(() => {\n    loadDetails();\n  }, [postId]);\n\n  useEffect(() => {\n    loadComments();\n  }, [postId]);\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        <p>{details}</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n        {!!comments.length && (\n          <button\n            type=\"button\"\n            className=\"button\"\n            onClick={() => {\n              setAreCommentsShown(current => !current);\n            }}\n          >\n            {`${areCommentsShown\n              ? 'Hide'\n              : 'Show'\n            } ${comments.length\n            } comment${(comments.length === 1)\n              ? ''\n              : 's'}`}\n          </button>\n        )}\n\n        {areCommentsShown && (\n          comments.map((comment: Comment) => (\n            <ul\n              key={comment.id}\n              className=\"PostDetails__list\"\n            >\n              <li className=\"PostDetails__list-item\">\n                <button\n                  type=\"button\"\n                  className=\"PostDetails__remove-button button\"\n                  onClick={() => (\n                    commentDeleteHandler(comment.id)\n                  )}\n                >\n                  X\n                </button>\n                <p>{comment.body}</p>\n              </li>\n            </ul>\n          ))\n        )}\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            postId={postId}\n            addComment={addComment}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { getUsers } from '../../api/users';\nimport { User } from '../../types/User';\n\ntype Props = {\n  selectedUserId: number;\n  setSelectedUserId: (userId: number)=> void;\n  setDetailsAreShown: (isHidden: boolean) => void;\n};\n\nexport const UserSelect: React.FC<Props> = ({\n  selectedUserId,\n  setSelectedUserId,\n  setDetailsAreShown,\n}) => {\n  const [users, setUsers] = useState([]);\n\n  const loadUsers = () => {\n    getUsers()\n      .then((usersFromServer) => {\n        setUsers(usersFromServer);\n      });\n  };\n\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  return (\n    <label htmlFor=\"unique-id\">\n      <span id=\"unique-id\">Select a user: &nbsp;</span>\n\n      <select\n        className=\"App__user-selector\"\n        value={selectedUserId}\n        onChange={event => {\n          setSelectedUserId(+event.target.value);\n          setDetailsAreShown(false);\n        }}\n      >\n        <option value=\"0\">All users</option>\n        {users.map((user: User) => (\n          <option\n            key={user.id}\n            value={user.id}\n          >\n            {user.name}\n          </option>\n        ))}\n      </select>\n    </label>\n  );\n};\n","import React, { useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { UserSelect } from './components/UserSelect';\n\nconst App: React.FC = () => {\n  const [userId, setUserId] = useState(0);\n  const [postId, setPostId] = useState(0);\n  const [postDetailsAreShown, setPostDetailsAreShown] = useState(false);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <UserSelect\n          selectedUserId={userId}\n          setSelectedUserId={setUserId}\n          setDetailsAreShown={setPostDetailsAreShown}\n        />\n      </header>\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            selectedUserId={userId}\n            selectedPostId={postId}\n            setSelectedPostId={setPostId}\n            areDetailsShown={setPostDetailsAreShown}\n            postDetailsAreShown={postDetailsAreShown}\n          />\n        </div>\n\n        <div className=\"App__content\">\n          {postDetailsAreShown\n            && (\n              <PostDetails\n                postId={postId}\n              />\n            )}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}